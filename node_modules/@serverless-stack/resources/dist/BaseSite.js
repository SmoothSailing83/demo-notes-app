"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.getBuildCmdEnvironment = exports.buildErrorResponsesFor404ErrorPage = exports.buildErrorResponsesForRedirectToIndex = void 0;
const cdk = __importStar(require("@aws-cdk/core"));
function buildErrorResponsesForRedirectToIndex(indexPage) {
    return [
        {
            httpStatus: 403,
            responsePagePath: `/${indexPage}`,
            responseHttpStatus: 200,
        },
        {
            httpStatus: 404,
            responsePagePath: `/${indexPage}`,
            responseHttpStatus: 200,
        },
    ];
}
exports.buildErrorResponsesForRedirectToIndex = buildErrorResponsesForRedirectToIndex;
function buildErrorResponsesFor404ErrorPage(errorPage) {
    return [
        {
            httpStatus: 403,
            responsePagePath: `/${errorPage}`,
        },
        {
            httpStatus: 404,
            responsePagePath: `/${errorPage}`,
        },
    ];
}
exports.buildErrorResponsesFor404ErrorPage = buildErrorResponsesFor404ErrorPage;
/////////////////////
// Helper Functions
/////////////////////
function getBuildCmdEnvironment(siteEnvironment) {
    // Generate environment placeholders to be replaced
    // ie. environment => { API_URL: api.url }
    //     environment => API_URL="{{ API_URL }}"
    //
    const buildCmdEnvironment = {};
    Object.entries(siteEnvironment || {}).forEach(([key, value]) => {
        buildCmdEnvironment[key] = cdk.Token.isUnresolved(value)
            ? `{{ ${key} }}`
            : value;
    });
    return buildCmdEnvironment;
}
exports.getBuildCmdEnvironment = getBuildCmdEnvironment;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQmFzZVNpdGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvQmFzZVNpdGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLG1EQUFxQztBQTBCckMsU0FBZ0IscUNBQXFDLENBQ25ELFNBQWlCO0lBRWpCLE9BQU87UUFDTDtZQUNFLFVBQVUsRUFBRSxHQUFHO1lBQ2YsZ0JBQWdCLEVBQUUsSUFBSSxTQUFTLEVBQUU7WUFDakMsa0JBQWtCLEVBQUUsR0FBRztTQUN4QjtRQUNEO1lBQ0UsVUFBVSxFQUFFLEdBQUc7WUFDZixnQkFBZ0IsRUFBRSxJQUFJLFNBQVMsRUFBRTtZQUNqQyxrQkFBa0IsRUFBRSxHQUFHO1NBQ3hCO0tBQ0YsQ0FBQztBQUNKLENBQUM7QUFmRCxzRkFlQztBQUVELFNBQWdCLGtDQUFrQyxDQUNoRCxTQUFpQjtJQUVqQixPQUFPO1FBQ0w7WUFDRSxVQUFVLEVBQUUsR0FBRztZQUNmLGdCQUFnQixFQUFFLElBQUksU0FBUyxFQUFFO1NBQ2xDO1FBQ0Q7WUFDRSxVQUFVLEVBQUUsR0FBRztZQUNmLGdCQUFnQixFQUFFLElBQUksU0FBUyxFQUFFO1NBQ2xDO0tBQ0YsQ0FBQztBQUNKLENBQUM7QUFiRCxnRkFhQztBQU9ELHFCQUFxQjtBQUNyQixtQkFBbUI7QUFDbkIscUJBQXFCO0FBRXJCLFNBQWdCLHNCQUFzQixDQUFDLGVBRXRDO0lBQ0MsbURBQW1EO0lBQ25ELDBDQUEwQztJQUMxQyw2Q0FBNkM7SUFDN0MsRUFBRTtJQUNGLE1BQU0sbUJBQW1CLEdBQTJCLEVBQUUsQ0FBQztJQUN2RCxNQUFNLENBQUMsT0FBTyxDQUFDLGVBQWUsSUFBSSxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsRUFBRSxFQUFFO1FBQzdELG1CQUFtQixDQUFDLEdBQUcsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQztZQUN0RCxDQUFDLENBQUMsTUFBTSxHQUFHLEtBQUs7WUFDaEIsQ0FBQyxDQUFDLEtBQUssQ0FBQztJQUNaLENBQUMsQ0FBQyxDQUFDO0lBRUgsT0FBTyxtQkFBbUIsQ0FBQztBQUM3QixDQUFDO0FBZkQsd0RBZUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBjZGsgZnJvbSBcIkBhd3MtY2RrL2NvcmVcIjtcbmltcG9ydCAqIGFzIHJvdXRlNTMgZnJvbSBcIkBhd3MtY2RrL2F3cy1yb3V0ZTUzXCI7XG5pbXBvcnQgKiBhcyBjbG91ZGZyb250IGZyb20gXCJAYXdzLWNkay9hd3MtY2xvdWRmcm9udFwiO1xuaW1wb3J0ICogYXMgYWNtIGZyb20gXCJAYXdzLWNkay9hd3MtY2VydGlmaWNhdGVtYW5hZ2VyXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmFzZVNpdGVEb21haW5Qcm9wcyB7XG4gIGRvbWFpbk5hbWU6IHN0cmluZztcbiAgZG9tYWluQWxpYXM/OiBzdHJpbmc7XG4gIGhvc3RlZFpvbmU/OiBzdHJpbmcgfCByb3V0ZTUzLklIb3N0ZWRab25lO1xuICBjZXJ0aWZpY2F0ZT86IGFjbS5JQ2VydGlmaWNhdGU7XG4gIGFsdGVybmF0ZU5hbWVzPzogc3RyaW5nW107XG4gIGlzRXh0ZXJuYWxEb21haW4/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJhc2VTaXRlRW52aXJvbm1lbnRPdXRwdXRzSW5mbyB7XG4gIHJlYWRvbmx5IHBhdGg6IHN0cmluZztcbiAgcmVhZG9ubHkgc3RhY2s6IHN0cmluZztcbiAgcmVhZG9ubHkgZW52aXJvbm1lbnRPdXRwdXRzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJhc2VTaXRlUmVwbGFjZVByb3BzIHtcbiAgcmVhZG9ubHkgZmlsZXM6IHN0cmluZztcbiAgcmVhZG9ubHkgc2VhcmNoOiBzdHJpbmc7XG4gIHJlYWRvbmx5IHJlcGxhY2U6IHN0cmluZztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkRXJyb3JSZXNwb25zZXNGb3JSZWRpcmVjdFRvSW5kZXgoXG4gIGluZGV4UGFnZTogc3RyaW5nXG4pOiBjbG91ZGZyb250LkVycm9yUmVzcG9uc2VbXSB7XG4gIHJldHVybiBbXG4gICAge1xuICAgICAgaHR0cFN0YXR1czogNDAzLFxuICAgICAgcmVzcG9uc2VQYWdlUGF0aDogYC8ke2luZGV4UGFnZX1gLFxuICAgICAgcmVzcG9uc2VIdHRwU3RhdHVzOiAyMDAsXG4gICAgfSxcbiAgICB7XG4gICAgICBodHRwU3RhdHVzOiA0MDQsXG4gICAgICByZXNwb25zZVBhZ2VQYXRoOiBgLyR7aW5kZXhQYWdlfWAsXG4gICAgICByZXNwb25zZUh0dHBTdGF0dXM6IDIwMCxcbiAgICB9LFxuICBdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRFcnJvclJlc3BvbnNlc0ZvcjQwNEVycm9yUGFnZShcbiAgZXJyb3JQYWdlOiBzdHJpbmdcbik6IGNsb3VkZnJvbnQuRXJyb3JSZXNwb25zZVtdIHtcbiAgcmV0dXJuIFtcbiAgICB7XG4gICAgICBodHRwU3RhdHVzOiA0MDMsXG4gICAgICByZXNwb25zZVBhZ2VQYXRoOiBgLyR7ZXJyb3JQYWdlfWAsXG4gICAgfSxcbiAgICB7XG4gICAgICBodHRwU3RhdHVzOiA0MDQsXG4gICAgICByZXNwb25zZVBhZ2VQYXRoOiBgLyR7ZXJyb3JQYWdlfWAsXG4gICAgfSxcbiAgXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCYXNlU2l0ZUNka0Rpc3RyaWJ1dGlvblByb3BzXG4gIGV4dGVuZHMgT21pdDxjbG91ZGZyb250LkRpc3RyaWJ1dGlvblByb3BzLCBcImRlZmF1bHRCZWhhdmlvclwiPiB7XG4gIHJlYWRvbmx5IGRlZmF1bHRCZWhhdmlvcj86IGNsb3VkZnJvbnQuQWRkQmVoYXZpb3JPcHRpb25zO1xufVxuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIEhlbHBlciBGdW5jdGlvbnNcbi8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QnVpbGRDbWRFbnZpcm9ubWVudChzaXRlRW52aXJvbm1lbnQ/OiB7XG4gIFtrZXk6IHN0cmluZ106IHN0cmluZztcbn0pOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IHtcbiAgLy8gR2VuZXJhdGUgZW52aXJvbm1lbnQgcGxhY2Vob2xkZXJzIHRvIGJlIHJlcGxhY2VkXG4gIC8vIGllLiBlbnZpcm9ubWVudCA9PiB7IEFQSV9VUkw6IGFwaS51cmwgfVxuICAvLyAgICAgZW52aXJvbm1lbnQgPT4gQVBJX1VSTD1cInt7IEFQSV9VUkwgfX1cIlxuICAvL1xuICBjb25zdCBidWlsZENtZEVudmlyb25tZW50OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge307XG4gIE9iamVjdC5lbnRyaWVzKHNpdGVFbnZpcm9ubWVudCB8fCB7fSkuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgYnVpbGRDbWRFbnZpcm9ubWVudFtrZXldID0gY2RrLlRva2VuLmlzVW5yZXNvbHZlZCh2YWx1ZSlcbiAgICAgID8gYHt7ICR7a2V5fSB9fWBcbiAgICAgIDogdmFsdWU7XG4gIH0pO1xuXG4gIHJldHVybiBidWlsZENtZEVudmlyb25tZW50O1xufVxuIl19